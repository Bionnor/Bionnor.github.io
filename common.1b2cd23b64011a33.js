"use strict";(self.webpackChunkflora=self.webpackChunkflora||[]).push([[592],{6518:(h,a,r)=>{r.d(a,{e:()=>e});var i=r(1135),l=r(6743),s=r(4650),c=r(6989),t=r(529);let e=(()=>{class n{constructor(o,g){this.token=o,this.http=g,this.loggedin=new i.X(this.token.loggedin()),this.authStatus=this.loggedin.asObservable(),this.host=l.N.apiUrl}ngOnInit(){this.token.loggedin()&&(this.email=this.token.getUsername())}changeAuthStatus(o){this.loggedin.next(o)}login(o){return this.http.post(this.host+"/auth/customer/login",o)}register(o){return this.http.post(this.host+"/auth/customer/register",o)}refreshToken(o){return this.http.post(this.host+"/auth/refreshToken",o)}getCustomerByEmail(o){return this.http.get(this.host+"/customer/by-email?email="+o)}}return n.\u0275fac=function(o){return new(o||n)(s.LFG(c.B),s.LFG(t.eN))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6989:(h,a,r)=>{r.d(a,{B:()=>l});var i=r(4650);let l=(()=>{class s{constructor(){}handle(t,e){this.set(t,e)}set(t,e){localStorage.setItem("access-token",t),localStorage.setItem("refresh-token",e)}getAccessToken(){return localStorage.getItem("access-token")}getRefreshToken(){return localStorage.getItem("refresh-token")}isValid(){const t=this.getAccessToken();if(!t)return!1;const e=this.payload(t);if(!e||"object"!=typeof e)return!1;const n=Math.floor(Date.now()/1e3);return!(e.exp&&n>=e.exp||e.iat&&n<e.iat)}payload(t){const e=t.split(".")[1];return this.decode(e)}decode(t){return JSON.parse(atob(t))}loggedin(){return this.isValid()}remove(){localStorage.removeItem("access-token"),localStorage.removeItem("refresh-token")}getUsername(){const t=this.getAccessToken();return t?this.payload(t).sub:null}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},6743:(h,a,r)=>{r.d(a,{N:()=>i});const i={production:!1,apiUrl:"http://localhost:8080/api/v1"}}}]);